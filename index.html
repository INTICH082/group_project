<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ–±-–∫–ª–∏–µ–Ω—Ç API ‚Äî –í–∫–ª–∞–¥–∫–∏ –ø–æ —Ä–æ–ª—è–º</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>–í–µ–±-–∫–ª–∏–µ–Ω—Ç –¥–ª—è API</h1>
    <p>–§—É–Ω–∫—Ü–∏–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Ä–æ–ª—è–º. –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Å—è –≤–∫–ª–∞–¥–∫–∞–º–∏.</p>

    <section id="auth-section">
        <h2>üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
        <button onclick="generateToken()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω (admin)</button>
        <div class="form-group">
            <label>–¢–æ–∫–µ–Ω:</label>
            <input type="text" id="token-input" placeholder="Bearer eyJ...">
        </div>
        <button onclick="saveToken()" class="secondary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω</button>
        <div class="response success" id="auth-response"></div>
    </section>

    <div class="tabs">
        <button class="tab-button active" onclick="openTab('admin')">–ê–¥–º–∏–Ω</button>
        <button class="tab-button" onclick="openTab('teacher')">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</button>
        <button class="tab-button" onclick="openTab('common')">–û–±—â–∏–µ</button>
        <button class="tab-button" onclick="openTab('service')">–°–µ—Ä–≤–∏—Å</button>
    </div>

    <!-- –ê–¥–º–∏–Ω -->
    <div id="admin" class="tab-content active">
        <section>
            <h2>–ê–¥–º–∏–Ω ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
            <div class="grid">
                <div>
                    <h3>–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <input type="number" id="block-user-id" placeholder="User ID">
                    <select id="block-status">
                        <option value="true">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</option>
                        <option value="false">–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</option>
                    </select>
                    <button onclick="blockUser()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    <div class="response" id="block-response"></div>
                </div>
                <div>
                    <h3>–û–±–Ω–æ–≤–∏—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <input type="number" id="name-user-id" placeholder="User ID">
                    <input type="text" id="new-name" placeholder="–ù–æ–≤–æ–µ –∏–º—è">
                    <button onclick="updateName()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    <div class="response" id="name-response"></div>
                </div>
            </div>
        </section>
    </div>

    <!-- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å -->
    <div id="teacher" class="tab-content">
        <section>
            <h2>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å ‚Äî –ö—É—Ä—Å—ã</h2>
            <div class="grid">
                <div>
                    <h3>–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å</h3>
                    <input type="text" id="course-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
                    <input type="text" id="course-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
                    <input type="number" id="course-teacher-id" placeholder="Teacher ID">
                    <button onclick="createCourse()">–°–æ–∑–¥–∞—Ç—å</button>
                    <div class="response" id="create-course-response"></div>
                </div>
                <div>
                    <h3>–ó–∞—á–∏—Å–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <input type="number" id="enroll-course-id" placeholder="Course ID">
                    <input type="number" id="enroll-user-id" placeholder="User ID">
                    <button onclick="enrollUser()">–ó–∞—á–∏—Å–ª–∏—Ç—å</button>
                    <div class="response" id="enroll-response"></div>
                </div>
                <div>
                    <h3>–£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å</h3>
                    <input type="number" id="delete-course-id" placeholder="Course ID">
                    <button onclick="deleteCourse()" class="danger">–£–¥–∞–ª–∏—Ç—å</button>
                    <div class="response" id="delete-course-response"></div>
                </div>
            </div>
        </section>

        <section>
            <h2>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å ‚Äî –í–æ–ø—Ä–æ—Å—ã</h2>
            <div class="grid">
                <div>
                    <h3>–°–æ–∑–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å</h3>
                    <input type="text" id="q-title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                    <input type="text" id="q-text" placeholder="–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞">
                    <div class="dynamic-list" id="q-options-list"><label>–í–∞—Ä–∏–∞–Ω—Ç—ã:</label></div>
                    <button onclick="addOption('q-options-list')" class="secondary small">+ –í–∞—Ä–∏–∞–Ω—Ç</button>
                    <input type="number" id="q-correct" placeholder="–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å">
                    <button onclick="createQuestion()">–°–æ–∑–¥–∞—Ç—å</button>
                    <div class="response" id="create-q-response"></div>
                </div>
                <div>
                    <h3>–û–±–Ω–æ–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</h3>
                    <input type="number" id="update-q-id" placeholder="Question ID">
                    <input type="text" id="update-q-text" placeholder="–ù–æ–≤—ã–π —Ç–µ–∫—Å—Ç">
                    <div class="dynamic-list" id="update-q-options-list"><label>–í–∞—Ä–∏–∞–Ω—Ç—ã:</label></div>
                    <button onclick="addOption('update-q-options-list')" class="secondary small">+ –í–∞—Ä–∏–∞–Ω—Ç</button>
                    <input type="number" id="update-q-correct" placeholder="–ù–æ–≤—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π">
                    <button onclick="updateQuestion()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    <div class="response" id="update-q-response"></div>
                </div>
                <div>
                    <h3>–£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å</h3>
                    <input type="number" id="delete-q-id" placeholder="Question ID">
                    <button onclick="deleteQuestion()" class="danger">–£–¥–∞–ª–∏—Ç—å</button>
                    <div class="response" id="delete-q-response"></div>
                </div>
            </div>
        </section>

        <section>
            <h2>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å ‚Äî –¢–µ—Å—Ç—ã</h2>
            <div class="grid">
                <div>
                    <h3>–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç</h3>
                    <input type="number" id="test-course-id" placeholder="Course ID">
                    <input type="text" id="test-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
                    <div class="dynamic-list" id="test-q-ids-list"><label>–í–æ–ø—Ä–æ—Å—ã (ID):</label></div>
                    <button onclick="addId('test-q-ids-list')" class="secondary small">+ ID</button>
                    <button onclick="createTest()">–°–æ–∑–¥–∞—Ç—å</button>
                    <div class="response" id="create-test-response"></div>
                </div>
                <div>
                    <h3>–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∞</h3>
                    <input type="number" id="status-test-id" placeholder="Test ID">
                    <select id="test-active">
                        <option value="true">–ê–∫—Ç–∏–≤–µ–Ω</option>
                        <option value="false">–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</option>
                    </select>
                    <button onclick="updateTestStatus()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    <div class="response" id="status-test-response"></div>
                </div>
                <div>
                    <h3>–ü–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã</h3>
                    <input type="number" id="reorder-test-id" placeholder="Test ID">
                    <div class="dynamic-list" id="reorder-ids-list"><label>–ù–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫:</label></div>
                    <button onclick="addId('reorder-ids-list')" class="secondary small">+ ID</button>
                    <button onclick="reorderQuestions()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    <div class="response" id="reorder-response"></div>
                </div>
                <div>
                    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</h3>
                    <input type="number" id="results-test-id" placeholder="Test ID">
                    <button onclick="listTestResults()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="test-results" class="pretty-list"></div>
                </div>
            </div>
        </section>
    </div>

    <!-- –û–±—â–∏–µ -->
    <div id="common" class="tab-content">
        <section>
            <h2>–û–±—â–∏–µ ‚Äî –ü—Ä–æ—Å–º–æ—Ç—Ä</h2>
            <div class="grid">
                <div>
                    <h3>–°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤</h3>
                    <button onclick="listCourses()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="courses-list" class="pretty-list"></div>
                </div>
                <div>
                    <h3>–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã</h3>
                    <button onclick="listAllQuestions()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="all-questions-list" class="pretty-list"></div>
                </div>
                <div>
                    <h3>–í–æ–ø—Ä–æ—Å—ã –∫—É—Ä—Å–∞</h3>
                    <input type="number" id="course-q-id" placeholder="Course ID">
                    <button onclick="listCourseQuestions()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="course-questions-list" class="pretty-list"></div>
                </div>
                <div>
                    <h3>–¢–µ—Å—Ç—ã –∫—É—Ä—Å–∞</h3>
                    <input type="number" id="tests-course-id" placeholder="Course ID">
                    <button onclick="listCourseTests()">–ü–æ–ª—É—á–∏—Ç—å</button>
                    <div id="course-tests-list" class="pretty-list"></div>
                </div>
            </div>
        </section>

        <section>
            <h2>–û–±—â–∏–µ ‚Äî –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞</h2>
            <div class="test-flow">
                <div id="step-course" class="test-step active">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å</h3>
                    <button onclick="loadCoursesForTest()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫—É—Ä—Å—ã</button>
                    <div id="test-courses-list" class="pretty-list" style="margin-top: 16px;"></div>
                </div>

                <div id="step-test" class="test-step">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç</h3>
                    <div id="test-list" class="pretty-list"></div>
                </div>

                <div id="step-quiz" class="test-step">
                    <div class="progress" id="quiz-progress"></div>
                    <div class="question-block" id="current-question"></div>
                    <div style="text-align: right; margin-top: 20px;">
                        <button id="next-btn" onclick="nextQuestion()">–î–∞–ª–µ–µ</button>
                    </div>
                </div>

                <div id="step-result" class="test-step">
                    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞</h3>
                    <div id="quiz-result" class="response success" style="font-size: 1.1rem;"></div>
                    <button onclick="restartTestFlow()" class="secondary" style="margin-top: 20px;">–ü—Ä–æ–π—Ç–∏ –¥—Ä—É–≥–æ–π —Ç–µ—Å—Ç</button>
                </div>
            </div>
        </section>
    </div>

    <!-- –°–µ—Ä–≤–∏—Å -->
    <div id="service" class="tab-content">
        <section>
            <h2>üõ† –°–µ—Ä–≤–∏—Å</h2>
            <button onclick="healthCheck()">Health Check</button>
            <div id="health-response" class="response"></div>
        </section>
    </div>

    <script src="ui.js"></script>
    <script src="api.js"></script>
    <script src="admin-functions.js"></script>
    <script src="teacher-functions.js"></script>
    <script src="common-functions.js"></script>
    <script src="test-flow.js"></script>
    <script src="auth.js"></script>
    <script src="else.js"></script>
</body>
</html>
